<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <!-- Font-Awesome -->

    <script src="https://kit.fontawesome.com/97132b68f0.js" crossorigin="anonymous"></script>


    <title>Ilava</title>
</head>
<style>
#ai-assistant { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
.chat-button { background-color: #28a745; color: white; border: none; padding: 10px; border-radius: 50%; cursor: pointer; }
.chat-box { display: none; background-color: white; border: 1px solid #ccc; border-radius: 10px; width: 300px; height: 400px; }
.chat-header { background-color: #28a745; color: white; padding: 10px; text-align: center; border-radius: 10px 10px 0 0; }
.chat-body { padding: 10px; height: 300px; overflow-y: scroll; }
.chat-footer { display: flex; padding: 10px; }
.send-btn { background-color: #28a745; border: none; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
.close-btn { background: none; border: none; color: white; cursor: pointer; float: right; }
</style>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">Ilava</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only"></span></a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/predict">Predict</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/dashboard">Dashboard</a>
                </li>


            </ul>
        </div>
    </nav>

    <!--CAROUSEL-->



    <div class="container my-4">
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/static/images/agricrop (1).png" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="/static/images/3.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="/static/images/5.jpg" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Crop Predictor</h5>
                        <p><b>Predict the type of Crop to be grown</b>
                        </p>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- blog -->
    <div class="container my-2">
        <!-- main -->

        <div class="row featurette mx-2">
            <div class="col-md-7 my-4">
                <h2 class="featurette-heading">Overview<span class="text-muted"></span></h2>
                <p class="lead">We use state-of-the-art machine learning and deep learning technologies to help you guide through the entire farming process. Make informed decisions to understand the demographics of your area, understand the factors that affect your
                    crop and keep them healthy for a super awesome successful yield.</div>
            <div class="col-md-5 my-4">
                <img src="/static/images/core.jpg" class="d-block w-100" alt="...">
            </div>
        </div>


        <div class="row featurette mx-2">
            <div class="col-md-7 order-md-2 my-3">
                <h2 class="featurette-heading">Parameters<span class="text-muted"></span></h2>
                <p class="lead">
                    Based on the requirements like which kind of climate is best suited for growing a particular crop,what will be the amount of water required for that crop to be grown,what will be the estimated rain for that crop,in what quantity must the chemicals of
                    the soil must be in,such that the crop can sustain more life and has no harm from threats,all these parameters are taken into consideration for building the model,which takes up these parameters and predicts the best type of crop/fruit
                    that the farmer must grow
            </div>
            <div class="col-md-5 order-md-1 my-5">
                <img src="/static/images/s3.jpg" height="250" ,width="250" class="d-block w-100" alt="...">
            </div>
        </div>
 <!-- AI Assistant Chat -->
 <div id="ai-assistant">
    <button id="chat-btn" class="chat-button">
      <i class="fas fa-comments"></i> Ask Assistant
    </button>
    <div id="chat-box" class="chat-box">
      <div class="chat-header">
        <h6>AI Assistant</h6>
        <button class="close-btn" onclick="closeChat()">X</button>
      </div>
      <div class="chat-body">
        <p>Hi, I'm your assistant. How can I help you?</p>
      </div>
      <div class="chat-footer">
        <input type="text" id="userInput" placeholder="Ask me something..." class="form-control">
        <button class="send-btn" onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>


    </div>

    <footer class="py-3 text-center text-light bg-dark">
        Copyright © 2022 | AgriCrop<br>
        University of Engineering & Management, Kolkata<br>
        Project Group: 30 | Semester: 7th | PROJ-CS701<br>
        Developed by,<br>
        Abhishek Sharma, Digbijoy Dasgupta, Ishita Pahari, Shreya Bose, Udayan Misra, Raktim Karmakar       
    </footer>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js " integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js " integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo " crossorigin="anonymous "></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js " integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI " crossorigin="anonymous "></script>
</body>
<script>
    const apiKey = 'AIzaSyCJAnctNslBas77t007bRN9MyV975u1ce4' ;   // Enter your apikey here
    const chatbox = document.getElementById("quote");
    const authorN = document.getElementById("author");

let messages = [];

function myFunction(){
	const msg = "give me a quote related to agriculture and farming";
    if (msg) {
        messages.push({
            "role": "user",
            "content": msg
        });
        fetchMessages();
    }
};

function fetchMessages() {
    try {
        var settings = {
            url: "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyCJAnctNslBas77t007bRN9MyV975u1ce4",
            method: "POST",
            timeout: 0,
            headers: {
                Authorization: "Bearer " + apiKey,
                "Content-Type": "application/json"
            },
            data: JSON.stringify({
                model: "gpt-3.5-turbo",
                messages: messages
            })
        };
        $.ajax(settings).done(function(response) {
			chatbox.innerHTML = '';  
			authorN.innerHTML = ''; 

			const message = response.choices[0].message;
            messages.push({
                "role": message.role,
                "content": message.content
            });					
            Rquote=message.content;	

			parts = Rquote.split(" - ")
			QuoteR = parts[0]
			authorName = parts[1]

			chatbox.append(QuoteR);
			authorN.append(authorName);
			
        }).fail(function(jqXHR, textStatus, errorThrown) {
			chatbox.innerHTML = '';  
			let errorMessage = 'Farming looks mighty easy when your plow is a pencil, and youre a thousand miles from the corn field.';
			chatbox.append(errorMessage);
        });
    } catch (error) {
		chatbox.innerHTML = '';  
		let errorMessage2 = 'Farming looks mighty easy when your plow is a pencil, and youre a thousand miles from the corn field.';
		chatbox.append(errorMessage2);
    }
}

    document.getElementById('chat-btn').onclick = function() {
      document.getElementById('chat-box').style.display = 'block';
    }

    function closeChat() {
      document.getElementById('chat-box').style.display = 'none';
    }

    function sendMessage() {
      let userInput = document.getElementById('userInput').value;
      if (userInput.trim()) {
        document.querySelector('.chat-body').innerHTML += `<p>User: ${userInput}</p>`;
        document.getElementById('userInput').value = '';
        document.querySelector('.chat-body').innerHTML += `<p>Assistant: Processing your query...</p>`;
        
        // Call the API with the user input
        fetchMessages(userInput);
      }
    }

    function fetchMessages(userInput) {
      const apiKey = "AIzaSyCJAnctNslBas77t007bRN9MyV975u1ce4";   // Enter your apikey here
      const chatbox = document.querySelector('.chat-body');

      let messages = [
        {
          "role": "user",
          "content": userInput
        }
      ];

      try {
        var settings = {
          url: "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=YOUR_API_KEY",
          method: "POST",
          timeout: 0,
          headers: {
            Authorization: "Bearer " + apiKey,
            "Content-Type": "application/json"
          },
          data: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: messages
          })
        };
        $.ajax(settings).done(function(response) {
          const message = response.choices[0].message;
          chatbox.innerHTML += `<p>Assistant: ${message.content}</p>`;
        }).fail(function(jqXHR, textStatus, errorThrown) {
          chatbox.innerHTML += `<p>Assistant: Sorry, I couldn't process your request.</p>`;
        });
      } catch (error) {
        chatbox.innerHTML += `<p>Assistant: Sorry, I couldn't process your request.</p>`;
      }
    }

    function myFunction() {
      document.getElementById('quote').textContent = "Fetching a new quote...";
      // Simulating the API call and setting a new quote
      setTimeout(() => {
        document.getElementById('quote').textContent = "“Agriculture is the most healthful, most useful, and most noble employment of man.”";
        document.getElementById('author').textContent = "- George Washington";
      }, 1000);
    }
</script>
</html>
